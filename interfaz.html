<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Coniuga il verbo</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 480px;
      margin: 40px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h1 {
      font-size: 1.3rem;
      text-align: center;
      margin-top: 0;
    }
    .prompt-label {
      margin-bottom: 8px;
      font-weight: 600;
    }
    .prompt {
      margin: 10px 0 16px;
      font-size: 1.1rem;
      padding: 10px 14px;
      border-radius: 8px;
      background: #eef2ff;
      display: inline-block;
    }
    .prompt span {
      font-weight: 600;
    }
    .prompt .subject {
      margin-right: 6px;
    }
    label {
      display: block;
      margin-bottom: 4px;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-size: 1rem;
    }
    button {
      margin-top: 10px;
      padding: 8px 14px;
      border-radius: 6px;
      border: none;
      background: #4f46e5;
      color: white;
      font-size: 0.95rem;
      cursor: pointer;
    }
    button:hover {
      background: #4338ca;
    }
    #next-btn {
      background: #6b7280;
      margin-left: 8px;
    }
    #next-btn:hover {
      background: #4b5563;
    }
    #feedback {
      margin-top: 10px;
      font-weight: 600;
      min-height: 1.2em;
    }
    #feedback.correct { color: #16a34a; }
    #feedback.wrong { color: #dc2626; }
  </style>
</head>
<body>

<div class="container">
  <h1>Coniuga il verbo</h1>

  <p class="prompt-label">Coniuga il verbo alla persona corrispondente:</p>

  <div class="prompt">
    <span class="subject" id="subject">io</span>
    <span>→</span>
    <span class="verb" id="verb">stare</span>
  </div>

  <label for="answer">Inserisci il verbo coniugato:</label>
  <input type="text" id="answer" autocomplete="off">

  <div>
    <button id="check-btn">Verifica</button>
    <button id="next-btn" type="button">Nuova domanda</button>
  </div>

  <p id="feedback"></p>
</div>

<script>
  // ===== STESSE STRUTTURE DEL TUO CODICE C =====

  // char verbo[4][10] = { "andare", "essere", "avere", "stare" };
  const verbo = ["andare", "essere", "avere", "stare"]; // n = 4

  // char soggetto[6][10] = { "io", "tu", "lui", "noi", "voi", "loro" };
  const soggetto = ["io", "tu", "lui", "noi", "voi", "loro"]; // a = 6

  // char corrette[6][4][12] = { ... };
  // corrette[soggetto][verbo]
  const corrette = [
    [ "vado",    "sono",   "ho",      "sto"    ], // io
    [ "vai",     "sei",    "hai",     "stai"   ], // tu
    [ "va",      "è",      "ha",      "sta"    ], // lui
    [ "andiamo", "siamo",  "abbiamo", "stiamo" ], // noi
    [ "andate",  "siete",  "avete",   "state"  ], // voi
    [ "vanno",   "sono",   "hanno",   "stanno" ]  // loro
  ];

  // indici correnti (equivalenti a idx_verbo e idx_soggetto)
  let idx_verbo = 0;
  let idx_soggetto = 0;

  const subjectSpan = document.getElementById('subject');
  const verbSpan = document.getElementById('verb');
  const answerInput = document.getElementById('answer');
  const feedback = document.getElementById('feedback');
  const checkBtn = document.getElementById('check-btn');
  const nextBtn = document.getElementById('next-btn');

  // come rand() % max
  function randomInt(max) {
    return Math.floor(Math.random() * max);
  }

  // equivalente di pick_word in C
  function pick_word() {
    idx_verbo = randomInt(verbo.length); // rand() % n
    console.log(verbo[idx_verbo]);       // printf
    verbSpan.textContent = verbo[idx_verbo];
  }

  // equivalente di pick_subject in C
  function pick_subject() {
    idx_soggetto = randomInt(soggetto.length); // rand() % a
    console.log(soggetto[idx_soggetto]);
    subjectSpan.textContent = soggetto[idx_soggetto];
  }

  function nuovaDomanda() {
    pick_word();
    pick_subject();
    answerInput.value = "";
    feedback.textContent = "";
    feedback.className = "";
    answerInput.focus();
  }

  // "if (strcmp(risposta, corrette[idx_soggetto][idx_verbo]) == 0)"
  function controllaRisposta() {
    const risposta = answerInput.value.trim();
    const corretta = corrette[idx_soggetto][idx_verbo];

    if (risposta === corretta) {
      feedback.textContent = "Giusto!";
      feedback.className = "correct";
    } else {
      feedback.textContent = "Sbagliato, la forma corretta era: " + corretta;
      feedback.className = "wrong";
    }
  }

  checkBtn.addEventListener('click', function () {
    controllaRisposta();
  });

  // invio con tasto Invio
  answerInput.addEventListener('keydown', function (e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      controllaRisposta();
    }
  });

  nextBtn.addEventListener('click', function () {
    nuovaDomanda();
  });

  // equivalente di "main": prima domanda all'avvio
  nuovaDomanda();
</script>

</body>
</html>
